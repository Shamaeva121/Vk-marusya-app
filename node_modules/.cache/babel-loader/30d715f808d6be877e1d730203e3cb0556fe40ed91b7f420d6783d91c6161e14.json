{"ast":null,"code":"import _classPrivateMethodInitSpec from \"d:/Users/User55/Documents/GitHub/Vk-marusya-app/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";\nimport _classPrivateFieldInitSpec from \"d:/Users/User55/Documents/GitHub/Vk-marusya-app/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _classPrivateFieldSet from \"d:/Users/User55/Documents/GitHub/Vk-marusya-app/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport _classPrivateFieldGet from \"d:/Users/User55/Documents/GitHub/Vk-marusya-app/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nimport _classPrivateGetter from \"d:/Users/User55/Documents/GitHub/Vk-marusya-app/node_modules/@babel/runtime/helpers/esm/classPrivateGetter.js\";\nimport { TrackEvent } from \"./track-event.js\";\nimport { getPrivate } from \"./utils.js\";\nfunction addVideoTrack(media, track) {\n  const trackList = media.videoTracks;\n  getPrivate(track).media = media;\n  if (!getPrivate(track).renditionSet) {\n    getPrivate(track).renditionSet = /* @__PURE__ */new Set();\n  }\n  const trackSet = getPrivate(trackList).trackSet;\n  trackSet.add(track);\n  const index = trackSet.size - 1;\n  if (!(index in VideoTrackList.prototype)) {\n    Object.defineProperty(VideoTrackList.prototype, index, {\n      get() {\n        return [...getPrivate(this).trackSet][index];\n      }\n    });\n  }\n  queueMicrotask(() => {\n    trackList.dispatchEvent(new TrackEvent(\"addtrack\", {\n      track\n    }));\n  });\n}\nfunction removeVideoTrack(track) {\n  var _getPrivate$media;\n  const trackList = (_getPrivate$media = getPrivate(track).media) === null || _getPrivate$media === void 0 ? void 0 : _getPrivate$media.videoTracks;\n  if (!trackList) return;\n  const trackSet = getPrivate(trackList).trackSet;\n  trackSet.delete(track);\n  queueMicrotask(() => {\n    trackList.dispatchEvent(new TrackEvent(\"removetrack\", {\n      track\n    }));\n  });\n}\nfunction selectedChanged(selected) {\n  var _getPrivate$media$vid;\n  const trackList = (_getPrivate$media$vid = getPrivate(selected).media.videoTracks) !== null && _getPrivate$media$vid !== void 0 ? _getPrivate$media$vid : [];\n  let hasUnselected = false;\n  for (const track of trackList) {\n    if (track === selected) continue;\n    track.selected = false;\n    hasUnselected = true;\n  }\n  if (hasUnselected) {\n    if (getPrivate(trackList).changeRequested) return;\n    getPrivate(trackList).changeRequested = true;\n    queueMicrotask(() => {\n      delete getPrivate(trackList).changeRequested;\n      trackList.dispatchEvent(new Event(\"change\"));\n    });\n  }\n}\nvar _addTrackCallback = /*#__PURE__*/new WeakMap();\nvar _removeTrackCallback = /*#__PURE__*/new WeakMap();\nvar _changeCallback = /*#__PURE__*/new WeakMap();\nvar _VideoTrackList_brand = /*#__PURE__*/new WeakSet();\nclass VideoTrackList extends EventTarget {\n  constructor() {\n    super();\n    _classPrivateMethodInitSpec(this, _VideoTrackList_brand);\n    _classPrivateFieldInitSpec(this, _addTrackCallback, void 0);\n    _classPrivateFieldInitSpec(this, _removeTrackCallback, void 0);\n    _classPrivateFieldInitSpec(this, _changeCallback, void 0);\n    getPrivate(this).trackSet = /* @__PURE__ */new Set();\n  }\n  [Symbol.iterator]() {\n    return _classPrivateGetter(_VideoTrackList_brand, this, _get_tracks).values();\n  }\n  get length() {\n    return _classPrivateGetter(_VideoTrackList_brand, this, _get_tracks).size;\n  }\n  getTrackById(id) {\n    var _find;\n    return (_find = [..._classPrivateGetter(_VideoTrackList_brand, this, _get_tracks)].find(track => track.id === id)) !== null && _find !== void 0 ? _find : null;\n  }\n  get selectedIndex() {\n    return [..._classPrivateGetter(_VideoTrackList_brand, this, _get_tracks)].findIndex(track => track.selected);\n  }\n  get onaddtrack() {\n    return _classPrivateFieldGet(_addTrackCallback, this);\n  }\n  set onaddtrack(callback) {\n    if (_classPrivateFieldGet(_addTrackCallback, this)) {\n      this.removeEventListener(\"addtrack\", _classPrivateFieldGet(_addTrackCallback, this));\n      _classPrivateFieldSet(_addTrackCallback, this, void 0);\n    }\n    if (typeof callback == \"function\") {\n      _classPrivateFieldSet(_addTrackCallback, this, callback);\n      this.addEventListener(\"addtrack\", callback);\n    }\n  }\n  get onremovetrack() {\n    return _classPrivateFieldGet(_removeTrackCallback, this);\n  }\n  set onremovetrack(callback) {\n    if (_classPrivateFieldGet(_removeTrackCallback, this)) {\n      this.removeEventListener(\"removetrack\", _classPrivateFieldGet(_removeTrackCallback, this));\n      _classPrivateFieldSet(_removeTrackCallback, this, void 0);\n    }\n    if (typeof callback == \"function\") {\n      _classPrivateFieldSet(_removeTrackCallback, this, callback);\n      this.addEventListener(\"removetrack\", callback);\n    }\n  }\n  get onchange() {\n    return _classPrivateFieldGet(_changeCallback, this);\n  }\n  set onchange(callback) {\n    if (_classPrivateFieldGet(_changeCallback, this)) {\n      this.removeEventListener(\"change\", _classPrivateFieldGet(_changeCallback, this));\n      _classPrivateFieldSet(_changeCallback, this, void 0);\n    }\n    if (typeof callback == \"function\") {\n      _classPrivateFieldSet(_changeCallback, this, callback);\n      this.addEventListener(\"change\", callback);\n    }\n  }\n}\nfunction _get_tracks(_this) {\n  return getPrivate(_this).trackSet;\n}\nexport { VideoTrackList, addVideoTrack, removeVideoTrack, selectedChanged };","map":{"version":3,"names":["TrackEvent","getPrivate","addVideoTrack","media","track","trackList","videoTracks","renditionSet","Set","trackSet","add","index","size","VideoTrackList","prototype","Object","defineProperty","get","queueMicrotask","dispatchEvent","removeVideoTrack","_getPrivate$media","delete","selectedChanged","selected","_getPrivate$media$vid","hasUnselected","changeRequested","Event","_addTrackCallback","WeakMap","_removeTrackCallback","_changeCallback","_VideoTrackList_brand","WeakSet","EventTarget","constructor","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","Symbol","iterator","_classPrivateGetter","_get_tracks","values","length","getTrackById","id","_find","find","selectedIndex","findIndex","onaddtrack","_classPrivateFieldGet","callback","removeEventListener","_classPrivateFieldSet","addEventListener","onremovetrack","onchange","_this"],"sources":["d:/Users/User55/Documents/GitHub/Vk-marusya-app/node_modules/media-tracks/dist/video-track-list.js"],"sourcesContent":["import { TrackEvent } from \"./track-event.js\";\nimport { getPrivate } from \"./utils.js\";\nfunction addVideoTrack(media, track) {\n  const trackList = media.videoTracks;\n  getPrivate(track).media = media;\n  if (!getPrivate(track).renditionSet) {\n    getPrivate(track).renditionSet = /* @__PURE__ */ new Set();\n  }\n  const trackSet = getPrivate(trackList).trackSet;\n  trackSet.add(track);\n  const index = trackSet.size - 1;\n  if (!(index in VideoTrackList.prototype)) {\n    Object.defineProperty(VideoTrackList.prototype, index, {\n      get() {\n        return [...getPrivate(this).trackSet][index];\n      }\n    });\n  }\n  queueMicrotask(() => {\n    trackList.dispatchEvent(new TrackEvent(\"addtrack\", { track }));\n  });\n}\nfunction removeVideoTrack(track) {\n  const trackList = getPrivate(track).media?.videoTracks;\n  if (!trackList) return;\n  const trackSet = getPrivate(trackList).trackSet;\n  trackSet.delete(track);\n  queueMicrotask(() => {\n    trackList.dispatchEvent(new TrackEvent(\"removetrack\", { track }));\n  });\n}\nfunction selectedChanged(selected) {\n  const trackList = getPrivate(selected).media.videoTracks ?? [];\n  let hasUnselected = false;\n  for (const track of trackList) {\n    if (track === selected) continue;\n    track.selected = false;\n    hasUnselected = true;\n  }\n  if (hasUnselected) {\n    if (getPrivate(trackList).changeRequested) return;\n    getPrivate(trackList).changeRequested = true;\n    queueMicrotask(() => {\n      delete getPrivate(trackList).changeRequested;\n      trackList.dispatchEvent(new Event(\"change\"));\n    });\n  }\n}\nclass VideoTrackList extends EventTarget {\n  #addTrackCallback;\n  #removeTrackCallback;\n  #changeCallback;\n  constructor() {\n    super();\n    getPrivate(this).trackSet = /* @__PURE__ */ new Set();\n  }\n  get #tracks() {\n    return getPrivate(this).trackSet;\n  }\n  [Symbol.iterator]() {\n    return this.#tracks.values();\n  }\n  get length() {\n    return this.#tracks.size;\n  }\n  getTrackById(id) {\n    return [...this.#tracks].find((track) => track.id === id) ?? null;\n  }\n  get selectedIndex() {\n    return [...this.#tracks].findIndex((track) => track.selected);\n  }\n  get onaddtrack() {\n    return this.#addTrackCallback;\n  }\n  set onaddtrack(callback) {\n    if (this.#addTrackCallback) {\n      this.removeEventListener(\"addtrack\", this.#addTrackCallback);\n      this.#addTrackCallback = void 0;\n    }\n    if (typeof callback == \"function\") {\n      this.#addTrackCallback = callback;\n      this.addEventListener(\"addtrack\", callback);\n    }\n  }\n  get onremovetrack() {\n    return this.#removeTrackCallback;\n  }\n  set onremovetrack(callback) {\n    if (this.#removeTrackCallback) {\n      this.removeEventListener(\"removetrack\", this.#removeTrackCallback);\n      this.#removeTrackCallback = void 0;\n    }\n    if (typeof callback == \"function\") {\n      this.#removeTrackCallback = callback;\n      this.addEventListener(\"removetrack\", callback);\n    }\n  }\n  get onchange() {\n    return this.#changeCallback;\n  }\n  set onchange(callback) {\n    if (this.#changeCallback) {\n      this.removeEventListener(\"change\", this.#changeCallback);\n      this.#changeCallback = void 0;\n    }\n    if (typeof callback == \"function\") {\n      this.#changeCallback = callback;\n      this.addEventListener(\"change\", callback);\n    }\n  }\n}\nexport {\n  VideoTrackList,\n  addVideoTrack,\n  removeVideoTrack,\n  selectedChanged\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}